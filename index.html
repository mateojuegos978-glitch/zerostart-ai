<script>
const API_KEY = "sk-or-v1-656...243";

async function send(){
  let input = document.getElementById("input");
  let text = input.value;
  if(text === "") return;

  addMessage(text,"user");
  input.value="";

  addMessage("Pensando...", "bot");

  try{
    const response = await fetch("https://openrouter.ai/api/v1/chat/completions",{
      method:"POST",
      headers:{
        "Authorization":"Bearer " + API_KEY,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        model:"mistralai/mistral-7b-instruct:free",
        messages:[
          {role:"system",content:"Eres una IA que ayuda a generar ideas para ganar dinero sin presupuesto."},
          {role:"user",content:text}
        ]
      })
    });

    const data = await response.json();
    document.querySelector(".bot:last-child").innerText =
      data.choices[0].message.content;

  }catch(error){
    document.querySelector(".bot:last-child").innerText =
      "Error conectando con la IA ðŸ˜”";
  }
}

function addMessage(text,type){
  let chat = document.getElementById("chat");
  let div = document.createElement("div");
  div.className = "message " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
</script>
